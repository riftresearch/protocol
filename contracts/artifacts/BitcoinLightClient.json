{"abi":[{"type":"function","name":"checkpoints","inputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"established","type":"bool","internalType":"bool"},{"name":"tipBlockLeaf","type":"tuple","internalType":"struct BlockLeaf","components":[{"name":"blockHash","type":"bytes32","internalType":"bytes32"},{"name":"height","type":"uint32","internalType":"uint32"},{"name":"cumulativeChainwork","type":"uint256","internalType":"uint256"}]}],"stateMutability":"view"},{"type":"function","name":"lightClientHeight","inputs":[],"outputs":[{"name":"","type":"uint32","internalType":"uint32"}],"stateMutability":"view"},{"type":"function","name":"mmrRoot","inputs":[],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"verifyBlockInclusion","inputs":[{"name":"blockLeaf","type":"tuple","internalType":"struct BlockLeaf","components":[{"name":"blockHash","type":"bytes32","internalType":"bytes32"},{"name":"height","type":"uint32","internalType":"uint32"},{"name":"cumulativeChainwork","type":"uint256","internalType":"uint256"}]},{"name":"siblings","type":"bytes32[]","internalType":"bytes32[]"},{"name":"peaks","type":"bytes32[]","internalType":"bytes32[]"}],"outputs":[],"stateMutability":"view"},{"type":"event","name":"BitcoinLightClientUpdated","inputs":[{"name":"priorMmrRoot","type":"bytes32","indexed":false,"internalType":"bytes32"},{"name":"newMmrRoot","type":"bytes32","indexed":false,"internalType":"bytes32"}],"anonymous":false},{"type":"error","name":"BlockNotConfirmed","inputs":[]},{"type":"error","name":"BlockNotInChain","inputs":[]},{"type":"error","name":"ChainworkTooLow","inputs":[]},{"type":"error","name":"CheckpointNotEstablished","inputs":[]}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"checkpoints(bytes32)":"eb5e91ff","lightClientHeight()":"cc38cd7d","mmrRoot()":"d21ddc61","verifyBlockInclusion((bytes32,uint32,uint256),bytes32[],bytes32[])":"a24462ea"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.28+commit.7893614a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"BlockNotConfirmed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"BlockNotInChain\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChainworkTooLow\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"CheckpointNotEstablished\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"priorMmrRoot\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"newMmrRoot\",\"type\":\"bytes32\"}],\"name\":\"BitcoinLightClientUpdated\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"checkpoints\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"established\",\"type\":\"bool\"},{\"components\":[{\"internalType\":\"bytes32\",\"name\":\"blockHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint32\",\"name\":\"height\",\"type\":\"uint32\"},{\"internalType\":\"uint256\",\"name\":\"cumulativeChainwork\",\"type\":\"uint256\"}],\"internalType\":\"struct BlockLeaf\",\"name\":\"tipBlockLeaf\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lightClientHeight\",\"outputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"mmrRoot\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"bytes32\",\"name\":\"blockHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint32\",\"name\":\"height\",\"type\":\"uint32\"},{\"internalType\":\"uint256\",\"name\":\"cumulativeChainwork\",\"type\":\"uint256\"}],\"internalType\":\"struct BlockLeaf\",\"name\":\"blockLeaf\",\"type\":\"tuple\"},{\"internalType\":\"bytes32[]\",\"name\":\"siblings\",\"type\":\"bytes32[]\"},{\"internalType\":\"bytes32[]\",\"name\":\"peaks\",\"type\":\"bytes32[]\"}],\"name\":\"verifyBlockInclusion\",\"outputs\":[],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"constructor\":{\"details\":\"The _mmrRoot and _tipBlockLeaf seed the initial state of the chain without explicit verification The _mmrRoot's correctness is easily confirmed by building the complete block MMR offchain from genesis to _tipBlockLeaf\",\"params\":{\"_mmrRoot\":\"The initial MMR root\",\"_tipBlockLeaf\":\"The tip block leaf of the initial MMR root\"}},\"lightClientHeight()\":{\"returns\":{\"_0\":\"The height of the highest block verified by the light client.\"}},\"verifyBlockInclusion((bytes32,uint32,uint256),bytes32[],bytes32[])\":{\"params\":{\"blockLeaf\":\"The block leaf to verify.\",\"peaks\":\"The peak nodes of the block leaf in the MMR.\",\"siblings\":\"The sibling nodes of the block leaf in the MMR.\"}}},\"stateVariables\":{\"checkpoints\":{\"params\":{\"_mmrRoot\":\"The MMR root to query.\"},\"returns\":{\"established\":\"Whether the checkpoint has been established (ie. _mmrRoot was the `mmrRoot` at one point)\",\"tipBlockLeaf\":\"The tip block leaf associated with the root\"}},\"mmrRoot\":{\"return\":\"The current MMR root.\",\"returns\":{\"_0\":\"The current MMR root.\"}}},\"title\":\"Bitcoin Light Client\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"checkpoints(bytes32)\":{\"notice\":\"Retrieves checkpoint information for a given MMR root.\"},\"constructor\":{\"notice\":\"Initializes the light client with an MMR root\"},\"lightClientHeight()\":{\"notice\":\"Returns the block height of the current tip of the verified chain.\"},\"mmrRoot()\":{\"notice\":\"The MMR root that includes all the blocks the light client is currently attesting as the best chain.\"},\"verifyBlockInclusion((bytes32,uint32,uint256),bytes32[],bytes32[])\":{\"notice\":\"Verifies that a block is included in the verified chain (MMR).\"}},\"notice\":\"A Bitcoin light client implementation that maintains a Merkle Mountain Range (MMR) of Bitcoin blocks for verification purposes Each block is stored as a leaf in the MMR containing: - Block hash - Block height - Cumulative chainwork Updates to the MMR root rely on a proof that the new leaves satisfy the Bitcoin Consensus rules.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/BitcoinLightClient.sol\":\"BitcoinLightClient\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts/=dependencies/bundler3/lib/openzeppelin-contracts/contracts/\",\":bundler3/=dependencies/bundler3/\",\":ds-test/=dependencies/bundler3/lib/morpho-blue/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=dependencies/bundler3/lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-gas-snapshot/=dependencies/bundler3/lib/permit2/lib/forge-gas-snapshot/src/\",\":forge-std/=dependencies/forge-std/\",\":halmos-cheatcodes/=dependencies/bundler3/lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/\",\":morpho-blue/=dependencies/bundler3/lib/morpho-blue/\",\":openzeppelin-contracts/=dependencies/bundler3/lib/openzeppelin-contracts/\",\":permit2/=dependencies/bundler3/lib/permit2/\",\":solady/=dependencies/solady/\",\":solmate/=dependencies/bundler3/lib/permit2/lib/solmate/\",\":sp1-contracts/=dependencies/sp1-contracts/\"],\"viaIR\":true},\"sources\":{\"dependencies/solady/src/utils/EfficientHashLib.sol\":{\"keccak256\":\"0x1eae95036f571ec3e914f3221427692f33be0524aa88a7b1f3555acc28d5d486\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://de974828a8b74bf4d2cd9b42eb24a6cbf155b5be3817bf7596290b9a4d5a38d6\",\"dweb:/ipfs/QmThys9928dH18dtjZABbuKP5cMh5CJQbemPEKtiU1uKDp\"]},\"src/BitcoinLightClient.sol\":{\"keccak256\":\"0x39ca7f56114ef795080b3285aab8a9ad0d05ec05a16e3904b0f8144377cb99f2\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://b67ec479fd67f4029f4ac64ad9992f5cfe7edba83dec4912cd5d4278357354c0\",\"dweb:/ipfs/QmPtdFbo3RbvMKt2Rx16pmhN5Jyk8EQNREPZmCduSKbLy3\"]},\"src/interfaces/IBTCDutchAuctionHouse.sol\":{\"keccak256\":\"0x4e874cb3a7fdf3cb2309ef73267eca19e4673695bbc73345f45ca6aa1e81decf\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://86744ef094c65d4ee87e91a78745a4428dbf3a6d7b7284e54c7aa5015ba77e7c\",\"dweb:/ipfs/QmYTV5KgzjK8xjwV8i9qbrhNXmRjELxufXGRKACvgKHJJ5\"]},\"src/interfaces/IBitcoinLightClient.sol\":{\"keccak256\":\"0x3f01e8a0731f601fb6e57abe7121d62aa11684fb63e5ae0d3e220078fd193261\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://697626d3faeee74ff8fe33ccb6f77a6946cdf3b38c771972a95e12de21e64dbf\",\"dweb:/ipfs/QmfSHXWDyrwySjGU8W9W9Btou6KgFTScHREymzGmfKCAPt\"]},\"src/interfaces/IRiftExchange.sol\":{\"keccak256\":\"0x8a3679ff57a196acaab4e2081382441ed9b0bfe43dbe35b8efdaef19a1366305\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://c60e7f3fbe58907f026a23e77a920df708b93f6788f74f68a293bdbc3959f6a8\",\"dweb:/ipfs/QmXk6txumKRKP3nRKeVSvLFfMvnGjW5dWC7uJ8iJp4gacP\"]},\"src/libraries/HashLib.sol\":{\"keccak256\":\"0x37eb9b922e6e55c5f8e0c57bd5e5a776eb02e4258f51641195b48167e9bbb502\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://86648b3f52685385d1a0e220a8fafefbe2007ec53771544a175cb4dc00c2c4bb\",\"dweb:/ipfs/QmdHeG9d9sP2e8yqAmgnWCzg28WSCYKquCv42Ne8ePHePU\"]},\"src/libraries/MMRProof.sol\":{\"keccak256\":\"0xa83519a3e07521faf78274930ac3c845a36d4a984917edd7609cb51d2ce1962a\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://b4af279e518cff065f5ce782e0cb56c75eac182745e37ade582817876dd4ac2e\",\"dweb:/ipfs/QmX9SVyHDd52d8NFiyfVh74rVcSDnXLi9WqVLgDarHBvj4\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.28+commit.7893614a"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"BlockNotConfirmed"},{"inputs":[],"type":"error","name":"BlockNotInChain"},{"inputs":[],"type":"error","name":"ChainworkTooLow"},{"inputs":[],"type":"error","name":"CheckpointNotEstablished"},{"inputs":[{"internalType":"bytes32","name":"priorMmrRoot","type":"bytes32","indexed":false},{"internalType":"bytes32","name":"newMmrRoot","type":"bytes32","indexed":false}],"type":"event","name":"BitcoinLightClientUpdated","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function","name":"checkpoints","outputs":[{"internalType":"bool","name":"established","type":"bool"},{"internalType":"struct BlockLeaf","name":"tipBlockLeaf","type":"tuple","components":[{"internalType":"bytes32","name":"blockHash","type":"bytes32"},{"internalType":"uint32","name":"height","type":"uint32"},{"internalType":"uint256","name":"cumulativeChainwork","type":"uint256"}]}]},{"inputs":[],"stateMutability":"view","type":"function","name":"lightClientHeight","outputs":[{"internalType":"uint32","name":"","type":"uint32"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"mmrRoot","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}]},{"inputs":[{"internalType":"struct BlockLeaf","name":"blockLeaf","type":"tuple","components":[{"internalType":"bytes32","name":"blockHash","type":"bytes32"},{"internalType":"uint32","name":"height","type":"uint32"},{"internalType":"uint256","name":"cumulativeChainwork","type":"uint256"}]},{"internalType":"bytes32[]","name":"siblings","type":"bytes32[]"},{"internalType":"bytes32[]","name":"peaks","type":"bytes32[]"}],"stateMutability":"view","type":"function","name":"verifyBlockInclusion"}],"devdoc":{"kind":"dev","methods":{"constructor":{"details":"The _mmrRoot and _tipBlockLeaf seed the initial state of the chain without explicit verification The _mmrRoot's correctness is easily confirmed by building the complete block MMR offchain from genesis to _tipBlockLeaf","params":{"_mmrRoot":"The initial MMR root","_tipBlockLeaf":"The tip block leaf of the initial MMR root"}},"lightClientHeight()":{"returns":{"_0":"The height of the highest block verified by the light client."}},"verifyBlockInclusion((bytes32,uint32,uint256),bytes32[],bytes32[])":{"params":{"blockLeaf":"The block leaf to verify.","peaks":"The peak nodes of the block leaf in the MMR.","siblings":"The sibling nodes of the block leaf in the MMR."}}},"version":1},"userdoc":{"kind":"user","methods":{"checkpoints(bytes32)":{"notice":"Retrieves checkpoint information for a given MMR root."},"constructor":{"notice":"Initializes the light client with an MMR root"},"lightClientHeight()":{"notice":"Returns the block height of the current tip of the verified chain."},"mmrRoot()":{"notice":"The MMR root that includes all the blocks the light client is currently attesting as the best chain."},"verifyBlockInclusion((bytes32,uint32,uint256),bytes32[],bytes32[])":{"notice":"Verifies that a block is included in the verified chain (MMR)."}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts/=dependencies/bundler3/lib/openzeppelin-contracts/contracts/","bundler3/=dependencies/bundler3/","ds-test/=dependencies/bundler3/lib/morpho-blue/lib/forge-std/lib/ds-test/src/","erc4626-tests/=dependencies/bundler3/lib/openzeppelin-contracts/lib/erc4626-tests/","forge-gas-snapshot/=dependencies/bundler3/lib/permit2/lib/forge-gas-snapshot/src/","forge-std/=dependencies/forge-std/","halmos-cheatcodes/=dependencies/bundler3/lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/","morpho-blue/=dependencies/bundler3/lib/morpho-blue/","openzeppelin-contracts/=dependencies/bundler3/lib/openzeppelin-contracts/","permit2/=dependencies/bundler3/lib/permit2/","solady/=dependencies/solady/","solmate/=dependencies/bundler3/lib/permit2/lib/solmate/","sp1-contracts/=dependencies/sp1-contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/BitcoinLightClient.sol":"BitcoinLightClient"},"evmVersion":"cancun","libraries":{},"viaIR":true},"sources":{"dependencies/solady/src/utils/EfficientHashLib.sol":{"keccak256":"0x1eae95036f571ec3e914f3221427692f33be0524aa88a7b1f3555acc28d5d486","urls":["bzz-raw://de974828a8b74bf4d2cd9b42eb24a6cbf155b5be3817bf7596290b9a4d5a38d6","dweb:/ipfs/QmThys9928dH18dtjZABbuKP5cMh5CJQbemPEKtiU1uKDp"],"license":"MIT"},"src/BitcoinLightClient.sol":{"keccak256":"0x39ca7f56114ef795080b3285aab8a9ad0d05ec05a16e3904b0f8144377cb99f2","urls":["bzz-raw://b67ec479fd67f4029f4ac64ad9992f5cfe7edba83dec4912cd5d4278357354c0","dweb:/ipfs/QmPtdFbo3RbvMKt2Rx16pmhN5Jyk8EQNREPZmCduSKbLy3"],"license":"GPL-2.0-or-later"},"src/interfaces/IBTCDutchAuctionHouse.sol":{"keccak256":"0x4e874cb3a7fdf3cb2309ef73267eca19e4673695bbc73345f45ca6aa1e81decf","urls":["bzz-raw://86744ef094c65d4ee87e91a78745a4428dbf3a6d7b7284e54c7aa5015ba77e7c","dweb:/ipfs/QmYTV5KgzjK8xjwV8i9qbrhNXmRjELxufXGRKACvgKHJJ5"],"license":"GPL-2.0-or-later"},"src/interfaces/IBitcoinLightClient.sol":{"keccak256":"0x3f01e8a0731f601fb6e57abe7121d62aa11684fb63e5ae0d3e220078fd193261","urls":["bzz-raw://697626d3faeee74ff8fe33ccb6f77a6946cdf3b38c771972a95e12de21e64dbf","dweb:/ipfs/QmfSHXWDyrwySjGU8W9W9Btou6KgFTScHREymzGmfKCAPt"],"license":"GPL-2.0-or-later"},"src/interfaces/IRiftExchange.sol":{"keccak256":"0x8a3679ff57a196acaab4e2081382441ed9b0bfe43dbe35b8efdaef19a1366305","urls":["bzz-raw://c60e7f3fbe58907f026a23e77a920df708b93f6788f74f68a293bdbc3959f6a8","dweb:/ipfs/QmXk6txumKRKP3nRKeVSvLFfMvnGjW5dWC7uJ8iJp4gacP"],"license":"GPL-2.0-or-later"},"src/libraries/HashLib.sol":{"keccak256":"0x37eb9b922e6e55c5f8e0c57bd5e5a776eb02e4258f51641195b48167e9bbb502","urls":["bzz-raw://86648b3f52685385d1a0e220a8fafefbe2007ec53771544a175cb4dc00c2c4bb","dweb:/ipfs/QmdHeG9d9sP2e8yqAmgnWCzg28WSCYKquCv42Ne8ePHePU"],"license":"GPL-2.0-or-later"},"src/libraries/MMRProof.sol":{"keccak256":"0xa83519a3e07521faf78274930ac3c845a36d4a984917edd7609cb51d2ce1962a","urls":["bzz-raw://b4af279e518cff065f5ce782e0cb56c75eac182745e37ade582817876dd4ac2e","dweb:/ipfs/QmX9SVyHDd52d8NFiyfVh74rVcSDnXLi9WqVLgDarHBvj4"],"license":"GPL-2.0-or-later"}},"version":1},"storageLayout":{"storage":[{"astId":45451,"contract":"src/BitcoinLightClient.sol:BitcoinLightClient","label":"mmrRoot","offset":0,"slot":"0","type":"t_bytes32"},{"astId":45456,"contract":"src/BitcoinLightClient.sol:BitcoinLightClient","label":"checkpoints","offset":0,"slot":"1","type":"t_mapping(t_bytes32,t_struct(BitcoinCheckpoint)47043_storage)"}],"types":{"t_bool":{"encoding":"inplace","label":"bool","numberOfBytes":"1"},"t_bytes32":{"encoding":"inplace","label":"bytes32","numberOfBytes":"32"},"t_mapping(t_bytes32,t_struct(BitcoinCheckpoint)47043_storage)":{"encoding":"mapping","key":"t_bytes32","label":"mapping(bytes32 => struct BitcoinCheckpoint)","numberOfBytes":"32","value":"t_struct(BitcoinCheckpoint)47043_storage"},"t_struct(BitcoinCheckpoint)47043_storage":{"encoding":"inplace","label":"struct BitcoinCheckpoint","numberOfBytes":"128","members":[{"astId":47039,"contract":"src/BitcoinLightClient.sol:BitcoinLightClient","label":"established","offset":0,"slot":"0","type":"t_bool"},{"astId":47042,"contract":"src/BitcoinLightClient.sol:BitcoinLightClient","label":"tipBlockLeaf","offset":0,"slot":"1","type":"t_struct(BlockLeaf)47037_storage"}]},"t_struct(BlockLeaf)47037_storage":{"encoding":"inplace","label":"struct BlockLeaf","numberOfBytes":"96","members":[{"astId":47032,"contract":"src/BitcoinLightClient.sol:BitcoinLightClient","label":"blockHash","offset":0,"slot":"0","type":"t_bytes32"},{"astId":47034,"contract":"src/BitcoinLightClient.sol:BitcoinLightClient","label":"height","offset":0,"slot":"1","type":"t_uint32"},{"astId":47036,"contract":"src/BitcoinLightClient.sol:BitcoinLightClient","label":"cumulativeChainwork","offset":0,"slot":"2","type":"t_uint256"}]},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"},"t_uint32":{"encoding":"inplace","label":"uint32","numberOfBytes":"4"}}},"ast":{"absolutePath":"src/BitcoinLightClient.sol","id":45638,"exportedSymbols":{"BitcoinCheckpoint":[47043],"BitcoinLightClient":[45637],"BlockLeaf":[47037],"HashLib":[48143],"IBitcoinLightClient":[47095],"MMRProofLib":[48348]},"nodeType":"SourceUnit","src":"45:5165:43","nodes":[{"id":45434,"nodeType":"PragmaDirective","src":"45:24:43","nodes":[],"literals":["solidity","=","0.8",".28"]},{"id":45438,"nodeType":"ImportDirective","src":"71:103:43","nodes":[],"absolutePath":"src/interfaces/IBitcoinLightClient.sol","file":"./interfaces/IBitcoinLightClient.sol","nameLocation":"-1:-1:-1","scope":45638,"sourceUnit":47096,"symbolAliases":[{"foreign":{"id":45435,"name":"IBitcoinLightClient","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47095,"src":"79:19:43","typeDescriptions":{}},"nameLocation":"-1:-1:-1"},{"foreign":{"id":45436,"name":"BlockLeaf","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47037,"src":"100:9:43","typeDescriptions":{}},"nameLocation":"-1:-1:-1"},{"foreign":{"id":45437,"name":"BitcoinCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47043,"src":"111:17:43","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":45440,"nodeType":"ImportDirective","src":"176:53:43","nodes":[],"absolutePath":"src/libraries/MMRProof.sol","file":"./libraries/MMRProof.sol","nameLocation":"-1:-1:-1","scope":45638,"sourceUnit":48349,"symbolAliases":[{"foreign":{"id":45439,"name":"MMRProofLib","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":48348,"src":"184:11:43","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":45442,"nodeType":"ImportDirective","src":"230:48:43","nodes":[],"absolutePath":"src/libraries/HashLib.sol","file":"./libraries/HashLib.sol","nameLocation":"-1:-1:-1","scope":45638,"sourceUnit":48144,"symbolAliases":[{"foreign":{"id":45441,"name":"HashLib","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":48143,"src":"238:7:43","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":45637,"nodeType":"ContractDefinition","src":"680:4529:43","nodes":[{"id":45449,"nodeType":"UsingForDirective","src":"746:28:43","nodes":[],"global":false,"libraryName":{"id":45446,"name":"HashLib","nameLocations":["752:7:43"],"nodeType":"IdentifierPath","referencedDeclaration":48143,"src":"752:7:43"},"typeName":{"id":45448,"nodeType":"UserDefinedTypeName","pathNode":{"id":45447,"name":"BlockLeaf","nameLocations":["764:9:43"],"nodeType":"IdentifierPath","referencedDeclaration":47037,"src":"764:9:43"},"referencedDeclaration":47037,"src":"764:9:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_storage_ptr","typeString":"struct BlockLeaf"}}},{"id":45451,"nodeType":"VariableDeclaration","src":"780:22:43","nodes":[],"baseFunctions":[47064],"constant":false,"functionSelector":"d21ddc61","mutability":"mutable","name":"mmrRoot","nameLocation":"795:7:43","scope":45637,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":45450,"name":"bytes32","nodeType":"ElementaryTypeName","src":"780:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"public"},{"id":45456,"nodeType":"VariableDeclaration","src":"1306:56:43","nodes":[],"baseFunctions":[47075],"constant":false,"functionSelector":"eb5e91ff","mutability":"mutable","name":"checkpoints","nameLocation":"1351:11:43","scope":45637,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_BitcoinCheckpoint_$47043_storage_$","typeString":"mapping(bytes32 => struct BitcoinCheckpoint)"},"typeName":{"id":45455,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":45452,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1314:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Mapping","src":"1306:37:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_BitcoinCheckpoint_$47043_storage_$","typeString":"mapping(bytes32 => struct BitcoinCheckpoint)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":45454,"nodeType":"UserDefinedTypeName","pathNode":{"id":45453,"name":"BitcoinCheckpoint","nameLocations":["1325:17:43"],"nodeType":"IdentifierPath","referencedDeclaration":47043,"src":"1325:17:43"},"referencedDeclaration":47043,"src":"1325:17:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_storage_ptr","typeString":"struct BitcoinCheckpoint"}}},"visibility":"public"},{"id":45479,"nodeType":"FunctionDefinition","src":"1798:198:43","nodes":[],"body":{"id":45478,"nodeType":"Block","src":"1860:136:43","nodes":[],"statements":[{"expression":{"id":45467,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":45465,"name":"mmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45451,"src":"1870:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":45466,"name":"_mmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45459,"src":"1880:8:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"1870:18:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":45468,"nodeType":"ExpressionStatement","src":"1870:18:43"},{"expression":{"id":45476,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":45469,"name":"checkpoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45456,"src":"1898:11:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_BitcoinCheckpoint_$47043_storage_$","typeString":"mapping(bytes32 => struct BitcoinCheckpoint storage ref)"}},"id":45471,"indexExpression":{"id":45470,"name":"_mmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45459,"src":"1910:8:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"1898:21:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_storage","typeString":"struct BitcoinCheckpoint storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"hexValue":"74727565","id":45473,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"1954:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},{"id":45474,"name":"_tipBlockLeaf","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45462,"src":"1974:13:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"}],"id":45472,"name":"BitcoinCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47043,"src":"1922:17:43","typeDescriptions":{"typeIdentifier":"t_type$_t_struct$_BitcoinCheckpoint_$47043_storage_ptr_$","typeString":"type(struct BitcoinCheckpoint storage pointer)"}},"id":45475,"isConstant":false,"isLValue":false,"isPure":false,"kind":"structConstructorCall","lValueRequested":false,"nameLocations":["1941:11:43","1960:12:43"],"names":["established","tipBlockLeaf"],"nodeType":"FunctionCall","src":"1922:67:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_memory_ptr","typeString":"struct BitcoinCheckpoint memory"}},"src":"1898:91:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_storage","typeString":"struct BitcoinCheckpoint storage ref"}},"id":45477,"nodeType":"ExpressionStatement","src":"1898:91:43"}]},"documentation":{"id":45457,"nodeType":"StructuredDocumentation","src":"1369:424:43","text":" @notice Initializes the light client with an MMR root\n @param _mmrRoot The initial MMR root\n @param _tipBlockLeaf The tip block leaf of the initial MMR root\n @dev The _mmrRoot and _tipBlockLeaf seed the initial state of the chain without explicit verification\n The _mmrRoot's correctness is easily confirmed by building the complete block MMR offchain from genesis to _tipBlockLeaf"},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":45463,"nodeType":"ParameterList","parameters":[{"constant":false,"id":45459,"mutability":"mutable","name":"_mmrRoot","nameLocation":"1818:8:43","nodeType":"VariableDeclaration","scope":45479,"src":"1810:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":45458,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1810:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":45462,"mutability":"mutable","name":"_tipBlockLeaf","nameLocation":"1845:13:43","nodeType":"VariableDeclaration","scope":45479,"src":"1828:30:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf"},"typeName":{"id":45461,"nodeType":"UserDefinedTypeName","pathNode":{"id":45460,"name":"BlockLeaf","nameLocations":["1828:9:43"],"nodeType":"IdentifierPath","referencedDeclaration":47037,"src":"1828:9:43"},"referencedDeclaration":47037,"src":"1828:9:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_storage_ptr","typeString":"struct BlockLeaf"}},"visibility":"internal"}],"src":"1809:50:43"},"returnParameters":{"id":45464,"nodeType":"ParameterList","parameters":[],"src":"1860:0:43"},"scope":45637,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":45543,"nodeType":"FunctionDefinition","src":"2753:968:43","nodes":[],"body":{"id":45542,"nodeType":"Block","src":"2856:865:43","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":45492,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":45490,"name":"newMmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45484,"src":"2953:10:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":45491,"name":"mmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45451,"src":"2967:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"2953:21:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":45495,"nodeType":"IfStatement","src":"2949:58:43","trueBody":{"id":45494,"nodeType":"Block","src":"2976:31:43","statements":[{"functionReturnParameters":45489,"id":45493,"nodeType":"Return","src":"2990:7:43"}]}},{"assignments":[45498],"declarations":[{"constant":false,"id":45498,"mutability":"mutable","name":"priorCheckpoint","nameLocation":"3096:15:43","nodeType":"VariableDeclaration","scope":45542,"src":"3071:40:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_memory_ptr","typeString":"struct BitcoinCheckpoint"},"typeName":{"id":45497,"nodeType":"UserDefinedTypeName","pathNode":{"id":45496,"name":"BitcoinCheckpoint","nameLocations":["3071:17:43"],"nodeType":"IdentifierPath","referencedDeclaration":47043,"src":"3071:17:43"},"referencedDeclaration":47043,"src":"3071:17:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_storage_ptr","typeString":"struct BitcoinCheckpoint"}},"visibility":"internal"}],"id":45502,"initialValue":{"baseExpression":{"id":45499,"name":"checkpoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45456,"src":"3114:11:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_BitcoinCheckpoint_$47043_storage_$","typeString":"mapping(bytes32 => struct BitcoinCheckpoint storage ref)"}},"id":45501,"indexExpression":{"id":45500,"name":"priorMmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45482,"src":"3126:12:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3114:25:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_storage","typeString":"struct BitcoinCheckpoint storage ref"}},"nodeType":"VariableDeclarationStatement","src":"3071:68:43"},{"condition":{"id":45505,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"3153:28:43","subExpression":{"expression":{"id":45503,"name":"priorCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45498,"src":"3154:15:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_memory_ptr","typeString":"struct BitcoinCheckpoint memory"}},"id":45504,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3170:11:43","memberName":"established","nodeType":"MemberAccess","referencedDeclaration":47039,"src":"3154:27:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":45510,"nodeType":"IfStatement","src":"3149:92:43","trueBody":{"id":45509,"nodeType":"Block","src":"3183:58:43","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":45506,"name":"CheckpointNotEstablished","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47052,"src":"3204:24:43","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":45507,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3204:26:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":45508,"nodeType":"RevertStatement","src":"3197:33:43"}]}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":45518,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"expression":{"baseExpression":{"id":45511,"name":"checkpoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45456,"src":"3331:11:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_BitcoinCheckpoint_$47043_storage_$","typeString":"mapping(bytes32 => struct BitcoinCheckpoint storage ref)"}},"id":45513,"indexExpression":{"id":45512,"name":"mmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45451,"src":"3343:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3331:20:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_storage","typeString":"struct BitcoinCheckpoint storage ref"}},"id":45514,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3352:12:43","memberName":"tipBlockLeaf","nodeType":"MemberAccess","referencedDeclaration":47042,"src":"3331:33:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_storage","typeString":"struct BlockLeaf storage ref"}},"id":45515,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3365:19:43","memberName":"cumulativeChainwork","nodeType":"MemberAccess","referencedDeclaration":47036,"src":"3331:53:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"expression":{"id":45516,"name":"tipBlockLeaf","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45487,"src":"3388:12:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"}},"id":45517,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3401:19:43","memberName":"cumulativeChainwork","nodeType":"MemberAccess","referencedDeclaration":47036,"src":"3388:32:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3331:89:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":45523,"nodeType":"IfStatement","src":"3327:144:43","trueBody":{"id":45522,"nodeType":"Block","src":"3422:49:43","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":45519,"name":"ChainworkTooLow","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47050,"src":"3443:15:43","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":45520,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3443:17:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":45521,"nodeType":"RevertStatement","src":"3436:24:43"}]}},{"expression":{"id":45531,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":45524,"name":"checkpoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45456,"src":"3526:11:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_BitcoinCheckpoint_$47043_storage_$","typeString":"mapping(bytes32 => struct BitcoinCheckpoint storage ref)"}},"id":45526,"indexExpression":{"id":45525,"name":"newMmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45484,"src":"3538:10:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"3526:23:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_storage","typeString":"struct BitcoinCheckpoint storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"hexValue":"74727565","id":45528,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"3584:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},{"id":45529,"name":"tipBlockLeaf","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45487,"src":"3604:12:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"}],"id":45527,"name":"BitcoinCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47043,"src":"3552:17:43","typeDescriptions":{"typeIdentifier":"t_type$_t_struct$_BitcoinCheckpoint_$47043_storage_ptr_$","typeString":"type(struct BitcoinCheckpoint storage pointer)"}},"id":45530,"isConstant":false,"isLValue":false,"isPure":false,"kind":"structConstructorCall","lValueRequested":false,"nameLocations":["3571:11:43","3590:12:43"],"names":["established","tipBlockLeaf"],"nodeType":"FunctionCall","src":"3552:66:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_memory_ptr","typeString":"struct BitcoinCheckpoint memory"}},"src":"3526:92:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_storage","typeString":"struct BitcoinCheckpoint storage ref"}},"id":45532,"nodeType":"ExpressionStatement","src":"3526:92:43"},{"expression":{"id":45535,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":45533,"name":"mmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45451,"src":"3628:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":45534,"name":"newMmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45484,"src":"3638:10:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3628:20:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":45536,"nodeType":"ExpressionStatement","src":"3628:20:43"},{"eventCall":{"arguments":[{"id":45538,"name":"priorMmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45482,"src":"3689:12:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"id":45539,"name":"newMmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45484,"src":"3703:10:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":45537,"name":"BitcoinLightClientUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47058,"src":"3663:25:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_bytes32_$_t_bytes32_$returns$__$","typeString":"function (bytes32,bytes32)"}},"id":45540,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3663:51:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":45541,"nodeType":"EmitStatement","src":"3658:56:43"}]},"documentation":{"id":45480,"nodeType":"StructuredDocumentation","src":"2002:746:43","text":" @notice Extends the light client chain. The caller of this function must ensure:\n - All committed blocks are in a sequential chain and satisfy PoW rules\n - All blocks being committed to in the MMR are provably available (stored in calldata/blobspace)\n @param priorMmrRoot The mmr root the update was built from\n @param newMmrRoot The updated mmr root\n @param tipBlockLeaf The tip of the chain at the `newMmrRoot`\n @dev Updates the root if and only if:\n      1. The prior root is an established checkpoint\n      2. The new root is different from the current root\n      3. The chainwork of the updated chain is greater than or equal to the chainwork of the current checkpoint"},"implemented":true,"kind":"function","modifiers":[],"name":"_updateRoot","nameLocation":"2762:11:43","parameters":{"id":45488,"nodeType":"ParameterList","parameters":[{"constant":false,"id":45482,"mutability":"mutable","name":"priorMmrRoot","nameLocation":"2782:12:43","nodeType":"VariableDeclaration","scope":45543,"src":"2774:20:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":45481,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2774:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":45484,"mutability":"mutable","name":"newMmrRoot","nameLocation":"2804:10:43","nodeType":"VariableDeclaration","scope":45543,"src":"2796:18:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":45483,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2796:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":45487,"mutability":"mutable","name":"tipBlockLeaf","nameLocation":"2833:12:43","nodeType":"VariableDeclaration","scope":45543,"src":"2816:29:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf"},"typeName":{"id":45486,"nodeType":"UserDefinedTypeName","pathNode":{"id":45485,"name":"BlockLeaf","nameLocations":["2816:9:43"],"nodeType":"IdentifierPath","referencedDeclaration":47037,"src":"2816:9:43"},"referencedDeclaration":47037,"src":"2816:9:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_storage_ptr","typeString":"struct BlockLeaf"}},"visibility":"internal"}],"src":"2773:73:43"},"returnParameters":{"id":45489,"nodeType":"ParameterList","parameters":[],"src":"2856:0:43"},"scope":45637,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":45556,"nodeType":"FunctionDefinition","src":"3767:122:43","nodes":[],"body":{"id":45555,"nodeType":"Block","src":"3825:64:43","nodes":[],"statements":[{"expression":{"expression":{"expression":{"baseExpression":{"id":45549,"name":"checkpoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45456,"src":"3842:11:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_BitcoinCheckpoint_$47043_storage_$","typeString":"mapping(bytes32 => struct BitcoinCheckpoint storage ref)"}},"id":45551,"indexExpression":{"id":45550,"name":"mmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45451,"src":"3854:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3842:20:43","typeDescriptions":{"typeIdentifier":"t_struct$_BitcoinCheckpoint_$47043_storage","typeString":"struct BitcoinCheckpoint storage ref"}},"id":45552,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3863:12:43","memberName":"tipBlockLeaf","nodeType":"MemberAccess","referencedDeclaration":47042,"src":"3842:33:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_storage","typeString":"struct BlockLeaf storage ref"}},"id":45553,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3876:6:43","memberName":"height","nodeType":"MemberAccess","referencedDeclaration":47034,"src":"3842:40:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"functionReturnParameters":45548,"id":45554,"nodeType":"Return","src":"3835:47:43"}]},"baseFunctions":[47081],"documentation":{"id":45544,"nodeType":"StructuredDocumentation","src":"3727:35:43","text":"@inheritdoc IBitcoinLightClient"},"functionSelector":"cc38cd7d","implemented":true,"kind":"function","modifiers":[],"name":"lightClientHeight","nameLocation":"3776:17:43","parameters":{"id":45545,"nodeType":"ParameterList","parameters":[],"src":"3793:2:43"},"returnParameters":{"id":45548,"nodeType":"ParameterList","parameters":[{"constant":false,"id":45547,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":45556,"src":"3817:6:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"},"typeName":{"id":45546,"name":"uint32","nodeType":"ElementaryTypeName","src":"3817:6:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"visibility":"internal"}],"src":"3816:8:43"},"scope":45637,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":45599,"nodeType":"FunctionDefinition","src":"3935:408:43","nodes":[],"body":{"id":45598,"nodeType":"Block","src":"4086:257:43","nodes":[],"statements":[{"assignments":[45570],"declarations":[{"constant":false,"id":45570,"mutability":"mutable","name":"leafHash","nameLocation":"4104:8:43","nodeType":"VariableDeclaration","scope":45598,"src":"4096:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":45569,"name":"bytes32","nodeType":"ElementaryTypeName","src":"4096:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"id":45574,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":45571,"name":"blockLeaf","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45560,"src":"4115:9:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"}},"id":45572,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4125:4:43","memberName":"hash","nodeType":"MemberAccess","referencedDeclaration":48125,"src":"4115:14:43","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_struct$_BlockLeaf_$47037_memory_ptr_$returns$_t_bytes32_$attached_to$_t_struct$_BlockLeaf_$47037_memory_ptr_$","typeString":"function (struct BlockLeaf memory) pure returns (bytes32)"}},"id":45573,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4115:16:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"VariableDeclarationStatement","src":"4096:35:43"},{"assignments":[45576],"declarations":[{"constant":false,"id":45576,"mutability":"mutable","name":"leafIndex","nameLocation":"4148:9:43","nodeType":"VariableDeclaration","scope":45598,"src":"4141:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"},"typeName":{"id":45575,"name":"uint32","nodeType":"ElementaryTypeName","src":"4141:6:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"visibility":"internal"}],"id":45579,"initialValue":{"expression":{"id":45577,"name":"blockLeaf","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45560,"src":"4160:9:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"}},"id":45578,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4170:6:43","memberName":"height","nodeType":"MemberAccess","referencedDeclaration":47034,"src":"4160:16:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"nodeType":"VariableDeclarationStatement","src":"4141:35:43"},{"condition":{"id":45592,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"4190:96:43","subExpression":{"arguments":[{"id":45582,"name":"leafHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45570,"src":"4215:8:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"id":45583,"name":"leafIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45576,"src":"4225:9:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},{"id":45584,"name":"siblings","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45563,"src":"4236:8:43","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"}},{"id":45585,"name":"peaks","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45566,"src":"4246:5:43","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"}},{"commonType":{"typeIdentifier":"t_uint32","typeString":"uint32"},"id":45589,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[],"expression":{"argumentTypes":[],"id":45586,"name":"lightClientHeight","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45556,"src":"4253:17:43","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint32_$","typeString":"function () view returns (uint32)"}},"id":45587,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4253:19:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"31","id":45588,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4275:1:43","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"4253:23:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},{"id":45590,"name":"mmrRoot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45451,"src":"4278:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_uint32","typeString":"uint32"},{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"},{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"},{"typeIdentifier":"t_uint32","typeString":"uint32"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"id":45580,"name":"MMRProofLib","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":48348,"src":"4191:11:43","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_MMRProofLib_$48348_$","typeString":"type(library MMRProofLib)"}},"id":45581,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4203:11:43","memberName":"verifyProof","nodeType":"MemberAccess","referencedDeclaration":48289,"src":"4191:23:43","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$_t_uint256_$_t_array$_t_bytes32_$dyn_memory_ptr_$_t_array$_t_bytes32_$dyn_memory_ptr_$_t_uint32_$_t_bytes32_$returns$_t_bool_$","typeString":"function (bytes32,uint256,bytes32[] memory,bytes32[] memory,uint32,bytes32) pure returns (bool)"}},"id":45591,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4191:95:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":45597,"nodeType":"IfStatement","src":"4186:151:43","trueBody":{"id":45596,"nodeType":"Block","src":"4288:49:43","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":45593,"name":"BlockNotInChain","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47046,"src":"4309:15:43","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":45594,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4309:17:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":45595,"nodeType":"RevertStatement","src":"4302:24:43"}]}}]},"baseFunctions":[47094],"documentation":{"id":45557,"nodeType":"StructuredDocumentation","src":"3895:35:43","text":"@inheritdoc IBitcoinLightClient"},"functionSelector":"a24462ea","implemented":true,"kind":"function","modifiers":[],"name":"verifyBlockInclusion","nameLocation":"3944:20:43","parameters":{"id":45567,"nodeType":"ParameterList","parameters":[{"constant":false,"id":45560,"mutability":"mutable","name":"blockLeaf","nameLocation":"3991:9:43","nodeType":"VariableDeclaration","scope":45599,"src":"3974:26:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf"},"typeName":{"id":45559,"nodeType":"UserDefinedTypeName","pathNode":{"id":45558,"name":"BlockLeaf","nameLocations":["3974:9:43"],"nodeType":"IdentifierPath","referencedDeclaration":47037,"src":"3974:9:43"},"referencedDeclaration":47037,"src":"3974:9:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_storage_ptr","typeString":"struct BlockLeaf"}},"visibility":"internal"},{"constant":false,"id":45563,"mutability":"mutable","name":"siblings","nameLocation":"4027:8:43","nodeType":"VariableDeclaration","scope":45599,"src":"4010:25:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[]"},"typeName":{"baseType":{"id":45561,"name":"bytes32","nodeType":"ElementaryTypeName","src":"4010:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":45562,"nodeType":"ArrayTypeName","src":"4010:9:43","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_storage_ptr","typeString":"bytes32[]"}},"visibility":"internal"},{"constant":false,"id":45566,"mutability":"mutable","name":"peaks","nameLocation":"4062:5:43","nodeType":"VariableDeclaration","scope":45599,"src":"4045:22:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[]"},"typeName":{"baseType":{"id":45564,"name":"bytes32","nodeType":"ElementaryTypeName","src":"4045:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":45565,"nodeType":"ArrayTypeName","src":"4045:9:43","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_storage_ptr","typeString":"bytes32[]"}},"visibility":"internal"}],"src":"3964:109:43"},"returnParameters":{"id":45568,"nodeType":"ParameterList","parameters":[],"src":"4086:0:43"},"scope":45637,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":45636,"nodeType":"FunctionDefinition","src":"4786:421:43","nodes":[],"body":{"id":45635,"nodeType":"Block","src":"5003:204:43","nodes":[],"statements":[{"expression":{"arguments":[{"id":45615,"name":"blockLeaf","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45603,"src":"5034:9:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"}},{"id":45616,"name":"siblings","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45606,"src":"5045:8:43","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_calldata_ptr","typeString":"bytes32[] calldata"}},{"id":45617,"name":"peaks","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45609,"src":"5055:5:43","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_calldata_ptr","typeString":"bytes32[] calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"},{"typeIdentifier":"t_array$_t_bytes32_$dyn_calldata_ptr","typeString":"bytes32[] calldata"},{"typeIdentifier":"t_array$_t_bytes32_$dyn_calldata_ptr","typeString":"bytes32[] calldata"}],"id":45614,"name":"verifyBlockInclusion","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45599,"src":"5013:20:43","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_BlockLeaf_$47037_memory_ptr_$_t_array$_t_bytes32_$dyn_memory_ptr_$_t_array$_t_bytes32_$dyn_memory_ptr_$returns$__$","typeString":"function (struct BlockLeaf memory,bytes32[] memory,bytes32[] memory) view"}},"id":45618,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5013:48:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":45619,"nodeType":"ExpressionStatement","src":"5013:48:43"},{"condition":{"commonType":{"typeIdentifier":"t_uint32","typeString":"uint32"},"id":45629,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[],"expression":{"argumentTypes":[],"id":45620,"name":"lightClientHeight","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45556,"src":"5075:17:43","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint32_$","typeString":"function () view returns (uint32)"}},"id":45621,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5075:19:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_uint32","typeString":"uint32"},"id":45628,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":45622,"name":"blockLeaf","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45603,"src":"5097:9:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf memory"}},"id":45623,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5107:6:43","memberName":"height","nodeType":"MemberAccess","referencedDeclaration":47034,"src":"5097:16:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint32","typeString":"uint32"},"id":45626,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":45624,"name":"expectedConfirmationBlocks","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45611,"src":"5117:26:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"hexValue":"31","id":45625,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5146:1:43","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"5117:30:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}}],"id":45627,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"5116:32:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"src":"5097:51:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"src":"5075:73:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":45634,"nodeType":"IfStatement","src":"5071:130:43","trueBody":{"id":45633,"nodeType":"Block","src":"5150:51:43","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":45630,"name":"BlockNotConfirmed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47048,"src":"5171:17:43","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":45631,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5171:19:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":45632,"nodeType":"RevertStatement","src":"5164:26:43"}]}}]},"documentation":{"id":45600,"nodeType":"StructuredDocumentation","src":"4349:432:43","text":" @notice Verifies that a block is included in the verified chain (MMR) and that it has the required number of confirmations\n @param blockLeaf The block leaf to verify.\n @param siblings The sibling nodes of the block leaf in the MMR.\n @param peaks The peak nodes of the block leaf in the MMR.\n @param expectedConfirmationBlocks The number of blocks that must be built on top of the blockLeaf"},"implemented":true,"kind":"function","modifiers":[],"name":"_verifyBlockInclusionAndConfirmations","nameLocation":"4795:37:43","parameters":{"id":45612,"nodeType":"ParameterList","parameters":[{"constant":false,"id":45603,"mutability":"mutable","name":"blockLeaf","nameLocation":"4859:9:43","nodeType":"VariableDeclaration","scope":45636,"src":"4842:26:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_memory_ptr","typeString":"struct BlockLeaf"},"typeName":{"id":45602,"nodeType":"UserDefinedTypeName","pathNode":{"id":45601,"name":"BlockLeaf","nameLocations":["4842:9:43"],"nodeType":"IdentifierPath","referencedDeclaration":47037,"src":"4842:9:43"},"referencedDeclaration":47037,"src":"4842:9:43","typeDescriptions":{"typeIdentifier":"t_struct$_BlockLeaf_$47037_storage_ptr","typeString":"struct BlockLeaf"}},"visibility":"internal"},{"constant":false,"id":45606,"mutability":"mutable","name":"siblings","nameLocation":"4897:8:43","nodeType":"VariableDeclaration","scope":45636,"src":"4878:27:43","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_calldata_ptr","typeString":"bytes32[]"},"typeName":{"baseType":{"id":45604,"name":"bytes32","nodeType":"ElementaryTypeName","src":"4878:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":45605,"nodeType":"ArrayTypeName","src":"4878:9:43","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_storage_ptr","typeString":"bytes32[]"}},"visibility":"internal"},{"constant":false,"id":45609,"mutability":"mutable","name":"peaks","nameLocation":"4934:5:43","nodeType":"VariableDeclaration","scope":45636,"src":"4915:24:43","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_calldata_ptr","typeString":"bytes32[]"},"typeName":{"baseType":{"id":45607,"name":"bytes32","nodeType":"ElementaryTypeName","src":"4915:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":45608,"nodeType":"ArrayTypeName","src":"4915:9:43","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_storage_ptr","typeString":"bytes32[]"}},"visibility":"internal"},{"constant":false,"id":45611,"mutability":"mutable","name":"expectedConfirmationBlocks","nameLocation":"4956:26:43","nodeType":"VariableDeclaration","scope":45636,"src":"4949:33:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"},"typeName":{"id":45610,"name":"uint32","nodeType":"ElementaryTypeName","src":"4949:6:43","typeDescriptions":{"typeIdentifier":"t_uint32","typeString":"uint32"}},"visibility":"internal"}],"src":"4832:156:43"},"returnParameters":{"id":45613,"nodeType":"ParameterList","parameters":[],"src":"5003:0:43"},"scope":45637,"stateMutability":"view","virtual":false,"visibility":"internal"}],"abstract":true,"baseContracts":[{"baseName":{"id":45444,"name":"IBitcoinLightClient","nameLocations":["720:19:43"],"nodeType":"IdentifierPath","referencedDeclaration":47095,"src":"720:19:43"},"id":45445,"nodeType":"InheritanceSpecifier","src":"720:19:43"}],"canonicalName":"BitcoinLightClient","contractDependencies":[],"contractKind":"contract","documentation":{"id":45443,"nodeType":"StructuredDocumentation","src":"280:399:43","text":" @title Bitcoin Light Client\n @notice A Bitcoin light client implementation that maintains a Merkle Mountain Range (MMR)\n of Bitcoin blocks for verification purposes\n Each block is stored as a leaf in the MMR containing:\n - Block hash\n - Block height\n - Cumulative chainwork\n Updates to the MMR root rely on a proof that the new leaves satisfy the Bitcoin Consensus rules."},"fullyImplemented":true,"linearizedBaseContracts":[45637,47095],"name":"BitcoinLightClient","nameLocation":"698:18:43","scope":45638,"usedErrors":[47046,47048,47050,47052],"usedEvents":[47058]}],"license":"GPL-2.0-or-later"},"id":43}